<div
  class="min-h-screen bg-gradient-to-br py-8 px-4 sm:px-6 lg:px-8 transition-all duration-500"
  [ngClass]="{
    'from-green-50 via-white to-green-100': userRole === Role.ROLE_OD,
    'from-purple-50 via-white to-purple-100': userRole !== Role.ROLE_OD
  }"
>
  <div class="max-w-7xl mx-auto">
    <!-- Header Section -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
      <div
        class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6"
      >
        <!-- Welcome Section -->
        <div class="flex-1">
          <div class="flex items-center gap-4 mb-4">
            <div
              class="w-16 h-16 rounded-full flex items-center justify-center"
              [ngClass]="{
                'bg-gradient-to-r from-green-500 to-green-600':
                  userRole === Role.ROLE_OD,
                'bg-gradient-to-r from-purple-500 to-purple-600':
                  userRole !== Role.ROLE_OD
              }"
            >
              <svg
                class="w-8 h-8 text-white"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  *ngIf="userRole === Role.ROLE_USER"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                ></path>
                <path
                  *ngIf="userRole === Role.ROLE_OD"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                ></path>
                <path
                  *ngIf="userRole === Role.ROLE_PUP"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
                ></path>
              </svg>
            </div>
            <div>
              <h1 class="text-3xl font-bold text-gray-900">
                Hello, {{ userProfile?.firstName }}!
              </h1>
              <p class="text-lg text-gray-600 mt-1">
                <span *ngIf="userRole === Role.ROLE_USER"
                  >Welcome to your personal profile</span
                >
                <span *ngIf="userRole === Role.ROLE_OD"
                  >Manage your event organizing profile</span
                >
                <span *ngIf="userRole === Role.ROLE_PUP"
                  >Manage your company profile</span
                >
              </p>
            </div>
          </div>

          <!-- Role Badge -->
          <div
            class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
            [ngClass]="{
              'bg-green-100 text-green-800': userRole === Role.ROLE_OD,
              'bg-purple-100 text-purple-800':
                userRole === Role.ROLE_USER || userRole === Role.ROLE_PUP
            }"
          >
            <span *ngIf="userRole === Role.ROLE_USER">Basic User</span>
            <span *ngIf="userRole === Role.ROLE_OD">Event Organizer</span>
            <span *ngIf="userRole === Role.ROLE_PUP">Service Provider</span>
          </div>
        </div>

        <!-- Notifications Toggle -->
        <div class="flex flex-col items-center text-center">
          <button
            (click)="toggleNotifications()"
            class="p-4 rounded-full transition-all duration-200 transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2"
            [ngClass]="{
              'bg-green-100 text-green-600 hover:bg-green-200 focus:ring-green-500':
                userRole === Role.ROLE_OD && notificationsEnabled,
              'bg-purple-100 text-purple-600 hover:bg-purple-200 focus:ring-purple-500':
                userRole !== Role.ROLE_OD && notificationsEnabled,
              'bg-gray-100 text-gray-400 hover:bg-gray-200 focus:ring-gray-500':
                !notificationsEnabled
            }"
          >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M10 2a6 6 0 00-6 6v3.5c0 .27-.11.52-.29.71L3.3 13.7a1 1 0 00-.21 1.09c.14.34.5.54.88.54h12c.38 0 .74-.2.88-.54a1 1 0 00-.21-1.09l-.41-.49a1 1 0 01-.29-.71V8a6 6 0 00-6-6zm-3 16a3 3 0 006 0h-6z"
              />
            </svg>
          </button>
          <span class="mt-2 text-sm font-medium">
            Notifications:
            <span
              class="block font-semibold"
              [ngClass]="{
                'text-green-600':
                  userRole === Role.ROLE_OD && notificationsEnabled,
                'text-purple-600':
                  userRole !== Role.ROLE_OD && notificationsEnabled,
                'text-gray-500': !notificationsEnabled
              }"
            >
              {{ notificationsEnabled ? "Enabled" : "Disabled" }}
            </span>
          </span>
        </div>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
      <!-- Profile Information -->
      <div class="xl:col-span-2 space-y-8">
        <!-- Profile Details Card -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
          <div
            class="p-6 border-b border-gray-200"
            [ngClass]="{
              'bg-gradient-to-r from-green-500 to-green-600':
                userRole === Role.ROLE_OD,
              'bg-gradient-to-r from-purple-500 to-purple-600':
                userRole !== Role.ROLE_OD
            }"
          >
            <h2 class="text-xl font-semibold text-white flex items-center">
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                ></path>
              </svg>
              <span *ngIf="userRole === Role.ROLE_USER"
                >Personal Information</span
              >
              <span *ngIf="userRole === Role.ROLE_OD"
                >Organizer Information</span
              >
              <span *ngIf="userRole === Role.ROLE_PUP"
                >Company Information</span
              >
            </h2>
          </div>

          <div class="p-6">
            <!-- User Profile -->
            <div *ngIf="userRole === Role.ROLE_USER" class="space-y-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Email Address</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.email }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >First Name</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.firstName }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Last Name</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.lastName }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Phone Number</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.phoneNumber || "Not provided" }}
                    </p>
                  </div>
                </div>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Country</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.country || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >City</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.city || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Address</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.address || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Zip Code</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.zipCode || "Not provided" }}
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Organizer Profile -->
            <div *ngIf="userRole === Role.ROLE_OD" class="space-y-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Email Address</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.email }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >First Name</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.firstName }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Last Name</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.lastName }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Phone Number</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.phoneNumber || "Not provided" }}
                    </p>
                  </div>
                </div>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Country</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.country || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >City</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.city || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Address</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.address || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Zip Code</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.zipCode || "Not provided" }}
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Company Profile -->
            <div *ngIf="userRole === Role.ROLE_PUP" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Email Address</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.email }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Company Name</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.firstName }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Phone Number</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.phoneNumber || "Not provided" }}
                    </p>
                  </div>
                </div>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Country</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.country || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >City</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.city || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Address</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.address || "Not provided" }}
                    </p>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-500 mb-1"
                      >Zip Code</label
                    >
                    <p class="text-gray-900 font-medium">
                      {{ userProfile?.zipCode || "Not provided" }}
                    </p>
                  </div>
                </div>
              </div>

              <!-- Company Description -->
              <div *ngIf="userProfile?.description">
                <label class="block text-sm font-medium text-gray-500 mb-2"
                  >Company Description</label
                >
                <div class="bg-gray-50 rounded-xl p-4">
                  <p class="text-gray-900 leading-relaxed">
                    {{ userProfile?.description }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="bg-white rounded-2xl shadow-xl p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">
            Account Actions
          </h3>
          <div class="flex flex-wrap gap-4">
            <button
              (click)="openEditProfileModal()"
              class="flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-lg hover:shadow-xl"
              [ngClass]="{
                'bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white focus:ring-green-500':
                  userRole === Role.ROLE_OD,
                'bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white focus:ring-purple-500':
                  userRole !== Role.ROLE_OD
              }"
            >
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                ></path>
              </svg>
              Edit Information
            </button>

            <button
              (click)="openChangePasswordModal()"
              class="flex items-center px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 shadow-lg hover:shadow-xl"
            >
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                ></path>
              </svg>
              Change Password
            </button>

            <button
              (click)="deactivateAccount()"
              class="flex items-center px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 shadow-lg hover:shadow-xl"
            >
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                ></path>
              </svg>
              Deactivate Account
            </button>
          </div>
        </div>
      </div>

      <!-- Photo Gallery/Avatar Section -->
      <div class="space-y-8">
        <!-- Main Photo Display -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
          <div
            class="p-6 border-b border-gray-200"
            [ngClass]="{
              'bg-gradient-to-r from-green-500 to-green-600':
                userRole === Role.ROLE_OD,
              'bg-gradient-to-r from-purple-500 to-purple-600':
                userRole !== Role.ROLE_OD
            }"
          >
            <h3 class="text-lg font-semibold text-white flex items-center">
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                ></path>
              </svg>
              <span *ngIf="userRole === Role.ROLE_USER">Your Avatar</span>
              <span *ngIf="userRole === Role.ROLE_OD">Portfolio</span>
              <span *ngIf="userRole === Role.ROLE_PUP">Company Gallery</span>
            </h3>
          </div>

          <div class="p-6">
            <!-- Single Avatar for Users -->
            <ng-container *ngIf="userRole === Role.ROLE_USER">
              <div class="flex justify-center">
                <div
                  class="relative w-48 h-48 rounded-2xl overflow-hidden shadow-lg"
                >
                  <img
                    [src]="userProfile?.tempPhotoUrlAndIdDTOList?.[0]?.tempPhotoUrl || fallbackImage"
                    alt="Avatar"
                    class="w-full h-full object-cover"
                  />
                  <div
                    class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"
                  ></div>
                </div>
              </div>
            </ng-container>

            <!-- Photo Gallery for OD and PUP -->
            <ng-container
              *ngIf="userRole === Role.ROLE_PUP || userRole === Role.ROLE_OD"
            >
              <!-- Main Selected Photo -->
              <div class="mb-6">
                <div
                  class="relative w-full h-64 rounded-2xl overflow-hidden shadow-lg"
                >
                  <img
                    [src]="selectedPhotoUrl || userProfile?.tempPhotoUrlAndIdDTOList?.[0]?.tempPhotoUrl || fallbackImage"
                    alt="Selected Photo"
                    class="w-full h-full object-cover"
                  />
                  <div
                    class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"
                  ></div>
                </div>
              </div>

              <!-- Photo Thumbnails -->
              <div
                *ngIf="userProfile?.tempPhotoUrlAndIdDTOList?.length"
                class="space-y-3"
              >
                <h4 class="text-sm font-medium text-gray-700">Gallery</h4>
                <div class="grid grid-cols-4 gap-3">
                  <div
                    *ngFor="let photo of userProfile?.tempPhotoUrlAndIdDTOList"
                    (click)="selectPhoto(photo.tempPhotoUrl)"
                    class="relative aspect-square rounded-lg overflow-hidden cursor-pointer transition-all duration-200 transform hover:scale-105 border-2"
                    [ngClass]="{
                      'border-green-500 ring-2 ring-green-200':
                        userRole === Role.ROLE_OD &&
                        selectedPhotoUrl === photo.tempPhotoUrl,
                      'border-purple-500 ring-2 ring-purple-200':
                        userRole !== Role.ROLE_OD &&
                        selectedPhotoUrl === photo.tempPhotoUrl,
                      'border-gray-200 hover:border-gray-300':
                        selectedPhotoUrl !== photo.tempPhotoUrl
                    }"
                  >
                    <img
                      [src]="photo.tempPhotoUrl || fallbackImage"
                      class="w-full h-full object-cover"
                      alt="Gallery Photo"
                    />
                  </div>
                </div>
              </div>

              <!-- No Photos Message -->
              <div
                *ngIf="!userProfile?.tempPhotoUrlAndIdDTOList?.length"
                class="text-center py-8"
              >
                <svg
                  class="mx-auto h-12 w-12 text-gray-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
                <p class="mt-2 text-sm text-gray-500">No photos uploaded yet</p>
              </div>
            </ng-container>
          </div>
        </div>

        <!-- Quick Stats Card (for OD and PUP) -->
        <div
          *ngIf="userRole === Role.ROLE_PUP || userRole === Role.ROLE_OD"
          class="bg-white rounded-2xl shadow-xl p-6"
        >
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Stats</h3>
          <div class="space-y-4">
            <div
              class="flex items-center justify-between p-3 rounded-xl"
              [ngClass]="{
                'bg-green-50': userRole === Role.ROLE_OD,
                'bg-purple-50': userRole === Role.ROLE_PUP
              }"
            >
              <span class="text-sm font-medium text-gray-700">
                <span *ngIf="userRole === Role.ROLE_OD">Events Created</span>
                <span *ngIf="userRole === Role.ROLE_PUP">Services Offered</span>
              </span>
              <span
                class="text-lg font-bold"
                [ngClass]="{
                  'text-green-600': userRole === Role.ROLE_OD,
                  'text-purple-600': userRole === Role.ROLE_PUP
                }"
              >
                0
              </span>
            </div>
            <div
              class="flex items-center justify-between p-3 bg-gray-50 rounded-xl"
            >
              <span class="text-sm font-medium text-gray-700">
                <span *ngIf="userRole === Role.ROLE_OD">Total Bookings</span>
                <span *ngIf="userRole === Role.ROLE_PUP">Total Orders</span>
              </span>
              <span class="text-lg font-bold text-gray-600">0</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modals -->
<app-change-password
  [showModal]="this.showChangePasswordModal"
  (closeModal)="closeChangePasswordModal()"
>
</app-change-password>

<app-edit-profile-form-component
  [showModal]="this.showEditProfileModal"
  [userProfileData]="this.userProfile"
  (closeModal)="closeEditProfileModal()"
  (profileUpdated)="refreshUserProfile()"
>
</app-edit-profile-form-component>
