<button
  (click)="toggleFavorite()"
  [disabled]="isLoading"
  class="group relative inline-flex items-center justify-center rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"
  [ngClass]="{
    'w-8 h-8': size === 'small',
    'w-10 h-10': size === 'medium',
    'w-12 h-12': size === 'large',
    'bg-red-500 hover:bg-red-600 text-white shadow-lg': isFavorite,
    'bg-white hover:bg-red-50 text-gray-600 hover:text-red-500 border border-gray-200 hover:border-red-300': !isFavorite
  }"
  [title]="isFavorite ? 'Remove from favorites' : 'Add to favorites'"
>
  <!-- Background pulse effect -->
  <div
    *ngIf="isFavorite && !isLoading"
    class="absolute inset-0 rounded-full bg-red-400 opacity-30 animate-ping"
    style="animation-duration: 2s; animation-iteration-count: 1"
  ></div>

  <!-- Loading spinner -->
  <div
    *ngIf="isLoading"
    class="border-2 border-current border-t-transparent rounded-full animate-spin"
    [ngClass]="{
      'w-3 h-3': size === 'small',
      'w-4 h-4': size === 'medium',
      'w-5 h-5': size === 'large'
    }"
  ></div>

  <!-- Heart icon -->
  <svg
    *ngIf="!isLoading"
    class="transition-all duration-300 group-hover:scale-110"
    [ngClass]="{
      'w-4 h-4': size === 'small',
      'w-5 h-5': size === 'medium',
      'w-6 h-6': size === 'large',
      'drop-shadow-sm': isFavorite
    }"
    [attr.fill]="isFavorite ? 'currentColor' : 'none'"
    stroke="currentColor"
    stroke-width="2"
    viewBox="0 0 24 24"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
    ></path>
  </svg>

  <!-- Tooltip -->
  <div class="absolute -top-10 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10">
    {{ isFavorite ? 'Remove from favorites' : 'Add to favorites' }}
  </div>
</button>
